{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\Root/assets\\Script\\Root\\LogicRoot.js"],"names":["signals","SignalMgr","cc","Class","extends","Component","properties","contactTop","contactCenter","contactBottom","lastContact","timeCount","onLoad","that","bind","listen","score","getRoot","direction","dispose","tag","console","info","start","update","dt"],"mappings":";;;;;;AAAA;;;;;;AACA,IAAIA,UAAU,IAAIC,mBAAJ,EAAd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAW,CADH;AAERC,uBAAc,CAFN;AAGRC,uBAAc,CAHN;AAIRC,qBAAY,CAJJ;AAKRC,mBAAU;AALF,KAHP;;AAWL;;AAECC,UAbI,oBAcJ;AACG,YAAIC,OAAO,IAAX;AACA,aAAKN,UAAL,GAAkB,KAAlB;AACA,aAAKE,aAAL,GAAqB,KAArB;AACA,aAAKD,aAAL,GAAqB,KAArB;AACAR,gBAAQc,IAAR,CAAa,UAAb,EAAyBC,MAAzB,CAAgC,UAASC,KAAT,EAAe;AAC3C,gBAAGhB,QAAQiB,OAAR,GAAkBC,SAAlB,KAA8B,CAAjC,EAAmC;AAC/BlB,wBAAQiB,OAAR,GAAkBC,SAAlB,GAA8B,CAA9B;AACH,aAFD,MAGI;AACAlB,wBAAQiB,OAAR,GAAkBC,SAAlB,GAA8B,CAA9B;AACH;AACDlB,oBAAQmB,OAAR,CAAgB,QAAhB;AACH,SARD;AASAnB,gBAAQc,IAAR,CAAa,SAAb,EAAwBC,MAAxB,CAA+B,UAASK,GAAT,EAAa;AACxC;AACA,gBAAGP,KAAKF,SAAL,GAAiBE,KAAKH,WAAtB,GAAoC,KAAvC,EAA6C;AACzCG,qBAAKN,UAAL,GAAkB,KAAlB;AACAM,qBAAKJ,aAAL,GAAqB,KAArB;AACAI,qBAAKL,aAAL,GAAqB,KAArB;AACA;AACH;AACDK,iBAAKH,WAAL,GAAmBG,KAAKF,SAAxB;AACA,oBAAOS,GAAP;AACI,qBAAK,CAAL;AACIP,yBAAKN,UAAL,GAAkB,KAAlB;AACAM,yBAAKJ,aAAL,GAAqB,KAArB;AACAI,yBAAKL,aAAL,GAAqB,KAArB;AACA;AACA;AACJ,qBAAK,CAAL;AACIK,yBAAKJ,aAAL,GAAqB,KAArB;AACAI,yBAAKL,aAAL,GAAqB,KAArB;AACAK,yBAAKN,UAAL,GAAkB,IAAlB;AACA;AACJ,qBAAK,CAAL;AACI,wBAAGM,KAAKJ,aAAL,KAAuB,IAA1B,EAA+B;AAC3BI,6BAAKN,UAAL,GAAkB,KAAlB;AACAM,6BAAKL,aAAL,GAAqB,KAArB;AACA;AACH,qBAJD,MAKI;AACAK,6BAAKL,aAAL,GAAqB,IAArB;AACH;AACD;AACJ,qBAAK,CAAL;AACI,wBAAGK,KAAKN,UAAL,KAAoB,KAApB,IAA6BM,KAAKL,aAAL,KAAuB,KAAvD,EAA6D;AACzDK,6BAAKJ,aAAL,GAAqB,KAArB;AACH,qBAFD,MAGI;AACAI,6BAAKJ,aAAL,GAAqB,IAArB;AACH;AACD;AACJ;AACI;AA/BR;AAiCA,gBAAGI,KAAKN,UAAL,KAAoB,IAApB,IAA4BM,KAAKJ,aAAL,KAAuB,IAAnD,IAA2DI,KAAKL,aAAL,KAAuB,IAArF,EAA0F;AACtFa,wBAAQC,IAAR,CAAa,oBAAmB,WAAhC;AACAT,qBAAKN,UAAL,GAAkB,KAAlB;AACAM,qBAAKJ,aAAL,GAAqB,KAArB;AACAI,qBAAKL,aAAL,GAAqB,KAArB;AACAR,wBAAQmB,OAAR,CAAgB,UAAhB,EAA2B,CAA3B;AACH;AACJ,SAjDD;AAkDF,KA9EG;AAgFLI,SAhFK,mBAgFI,CAER,CAlFI;AAoFLC,UApFK,kBAoFGC,EApFH,EAqFL;AACI,aAAKd,SAAL,GAAiB,KAAKA,SAAL,GAAiB,CAAlC;AACH;AAvFI,CAAT","file":"LogicRoot.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Root","sourcesContent":["import SignalMgr from \"../Signal/SignalMgr\";\r\nvar signals = new SignalMgr();\r\n// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        contactTop:0,\r\n        contactCenter:0,\r\n        contactBottom:0,\r\n        lastContact:0,\r\n        timeCount:0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n     onLoad () \r\n     {\r\n        var that = this;\r\n        this.contactTop = false;\r\n        this.contactBottom = false;\r\n        this.contactCenter = false;\r\n        signals.bind(\"getScore\").listen(function(score){\r\n            if(signals.getRoot().direction===0){\r\n                signals.getRoot().direction = 1;\r\n            }\r\n            else{\r\n                signals.getRoot().direction = 0;\r\n            }\r\n            signals.dispose(\"switch\");\r\n        });\r\n        signals.bind(\"contact\").listen(function(tag){\r\n            //console.info(\"[Logic Contact]\"+ tag);\r\n            if(that.timeCount - that.lastContact > 10000){\r\n                that.contactTop = false;\r\n                that.contactBottom = false;\r\n                that.contactCenter = false;\r\n                //console.info(\"[Contact Overtime]\");\r\n            }\r\n            that.lastContact = that.timeCount\r\n            switch(tag){\r\n                case 2:\r\n                    that.contactTop = false;\r\n                    that.contactBottom = false;\r\n                    that.contactCenter = false;\r\n                    //console.info(\"[Contact Surface]\");\r\n                    break;\r\n                case 4:\r\n                    that.contactBottom = false;\r\n                    that.contactCenter = false\r\n                    that.contactTop = true;\r\n                    break;\r\n                case 5:\r\n                    if(that.contactBottom === true){\r\n                        that.contactTop = false;\r\n                        that.contactCenter = false;\r\n                        //console.info(\"[Contact Not Vaild]\");\r\n                    }\r\n                    else{\r\n                        that.contactCenter = true;\r\n                    }\r\n                    break;\r\n                case 6:\r\n                    if(that.contactTop === false || that.contactCenter === false){\r\n                        that.contactBottom = false;\r\n                    }\r\n                    else{\r\n                        that.contactBottom = true;\r\n                    }\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            if(that.contactTop === true && that.contactBottom === true && that.contactCenter === true){\r\n                console.info(\"[Logic Contact]\"+ \"Get Score\");\r\n                that.contactTop = false;\r\n                that.contactBottom = false;\r\n                that.contactCenter = false;\r\n                signals.dispose(\"getScore\",1);\r\n            }\r\n        });\r\n     },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update (dt) \r\n    {\r\n        this.timeCount = this.timeCount + 1;\r\n    },\r\n});\r\n"]}