{"version":3,"sources":["Signal.js"],"names":["singleton","Singleton","Signal","root","callback","sets","Set","to","cmd","has","console","log","constructor","name","add","listen","call","push","dispose","args","forEach","element","getSingleton","info","execute","apply","getCmds","cmds"],"mappings":";;;;;;;;;;;AAAA;;;;;;;;AAEA,IAAIA,YAAY,IAAIC,mBAAJ,EAAhB;;IAEqBC,SACjB,gBAAYC,IAAZ,EAAkB;AAAA;;AACd;AACA,QAAIC,WAAW,EAAf;AACA;AACA,QAAIC,OAAO,IAAIC,GAAJ,EAAX;AACA;AACA,SAAKC,EAAL,GAAU,UAASC,GAAT,EAAa;AACnB,YAAGH,KAAKI,GAAL,CAASD,GAAT,CAAH,EAAiB;AACb;AACAE,oBAAQC,GAAR,CAAY,cAAaH,IAAII,WAAJ,GAAkBC,IAA3C;AACH,SAHD,MAII;AACAH,oBAAQC,GAAR,CAAY,cAAaH,IAAII,WAAJ,GAAkBC,IAA3C;AACAR,iBAAKS,GAAL,CAASN,GAAT;AACH;AACJ,KATD;AAUA,SAAKO,MAAL,GAAc,UAASC,IAAT,EAAc;AACxBZ,iBAASa,IAAT,CAAcD,IAAd;AACH,KAFD;AAGA;AACA,SAAKE,OAAL,GAAe,UAASC,IAAT,EAAc;AACzBd,aAAKe,OAAL,CAAa,UAASC,OAAT,EAAiB;AAC1B,gBAAIb,MAAMR,UAAUsB,YAAV,CAAuBD,OAAvB,EAA+BlB,IAA/B,CAAV;AACAO,oBAAQa,IAAR,CAAa,gBAAcpB,IAAd,GAAqB,OAArB,GAA8BK,GAA3C;AACAA,gBAAIgB,OAAJ,CAAYC,KAAZ,CAAkB,IAAlB,EAAuBN,IAAvB;AACH,SAJD;AAKAf,iBAASgB,OAAT,CAAiB,UAASC,OAAT,EAAiB;AAC9B;AACAA,oBAAQI,KAAR,CAAc,IAAd,EAAmBN,IAAnB;AACH,SAHD;AAIH,KAVD;AAWA,SAAKO,OAAL,GAAe,YAAU;AACrB,YAAIC,OAAO,EAAX;AACAtB,aAAKe,OAAL,CAAa,UAASC,OAAT,EAAiB;AAC1BM,iBAAKV,IAAL,CAAUjB,UAAUsB,YAAV,CAAuBD,OAAvB,EAA+BlB,IAA/B,CAAV;AACH,SAFD;AAGA,eAAOwB,IAAP;AACH,KAND;AAOH;;kBAvCgBzB","file":"Signal.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Signal","sourcesContent":["import Singleton from \"../Lib/Singleton\"\r\n\r\nvar singleton = new Singleton();\r\n\r\nexport default class Signal {\r\n    constructor(root) {\r\n        //回调函数\r\n        var callback = [];\r\n        //维护一个命令字典\r\n        var sets = new Set();\r\n        // 维护当前requestAnimationFrame的id\r\n        this.to = function(cmd){\r\n            if(sets.has(cmd)){\r\n                //已经添加指令\r\n                console.log(\"is exist \"+ cmd.constructor().name);\r\n            }\r\n            else{\r\n                console.log(\"no exist \"+ cmd.constructor().name);\r\n                sets.add(cmd);\r\n            }\r\n        };\r\n        this.listen = function(call){\r\n            callback.push(call);\r\n        }\r\n        //信号被发布事，执行所有和信号关联的指令\r\n        this.dispose = function(args){\r\n            sets.forEach(function(element){\r\n                var cmd = singleton.getSingleton(element,root);\r\n                console.info(\"[root is 3]\"+root + \"[cmd]\"+ cmd);\r\n                cmd.execute.apply(this,args);\r\n            });\r\n            callback.forEach(function(element){\r\n                //执行\r\n                element.apply(this,args);\r\n            });\r\n        }\r\n        this.getCmds = function(){\r\n            var cmds = [];\r\n            sets.forEach(function(element){\r\n                cmds.push(singleton.getSingleton(element,root))\r\n            });\r\n            return cmds;\r\n        }\r\n    }\r\n}"]}